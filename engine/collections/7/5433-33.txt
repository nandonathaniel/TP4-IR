The client is authenticating to a server that does n't belong to a domain or no Active Directory domain exists ( commonly referred to as `` workgroup '' or `` peer - to - peer '' ) The server must have the ' Password protected sharing ' feature enabled , which is not enabled by default and which is mutually exclusive with HomeGroup on some versions of Windows . When server and client both belong to the same HomeGroup , a protocol similar to Kerberos , Public Key Cryptography based User to User Authentication will be used instead of NTLM . HomeGroup is probably the easiest way to share resources on a small network , requiring minimal setup , even compared to configuring a few additional users to be able to use Password protected sharing , which may mean it is used much more than Password protected sharing on small networks and home networks . If the server is a device that supports SMB , such as NAS devices and network printers , the NTLM SSP may offer the only supported authentication method . Some implementations of SMB or older distributions of e.g. Samba may cause Windows to negotiate NTLMv1 or even LM for outbound authentication with the SMB server , allowing the device to work although it may be loaded with outdated , insecure software regardless of whether it were a new device . If the server is a member of a domain but Kerberos can not be used . The client is authenticating to a server using an IP address ( and no reverse name resolution is available ) The client is authenticating to a server that belongs to a different Active Directory forest that has a legacy NTLM trust instead of a transitive inter-forest trust Where a firewall would otherwise restrict the ports required by Kerberos ( typically TCP 88 )