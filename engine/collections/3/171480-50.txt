Adding the cast may mask failure to include the header stdlib. h , in which the function prototype for malloc is found . In the absence of a prototype for malloc , the C90 standard requires that the C compiler assume malloc returns an int . If there is no cast , C90 requires a diagnostic when this integer is assigned to the pointer ; however , with the cast , this diagnostic would not be produced , hiding a bug . On certain architectures and data models ( such as LP64 on 64 - bit systems , where long and pointers are 64 - bit and int is 32 - bit ) , this error can actually result in undefined behaviour , as the implicitly declared malloc returns a 32 - bit value whereas the actually defined function returns a 64 - bit value . Depending on calling conventions and memory layout , this may result in stack smashing . This issue is less likely to go unnoticed in modern compilers , as C99 does not permit implicit declarations , so the compiler must produce a diagnostic even if it does assume int return .