Zhuge Liang garrisoned at Yangping ( 陽平 ; around present - day Hanzhong , Shaanxi ) and ordered Wei Yan to lead the troops east . He left behind only 10,000 men to defend Yangping . Sima Yi led 200,000 troops to attack Zhuge Liang and he took a shortcut , bypassing Wei Yan 's army and arriving at a place 60 li away from Zhuge Liang 's location . Upon inspection , Sima Yi realised that Zhuge Liang 's city was weakly defended . Zhuge Liang knew that Sima Yi was near , so he thought of recalling Wei Yan 's army back to counter Sima Yi , but it was too late already and his men were worried and terrified . Zhuge Liang remained calm and instructed his men to hide all flags and banners and silence the war drums . He then ordered all the gates to be opened and told his men to sweep and dust the ground . Sima Yi was under the impression that Zhuge Liang was cautious and prudent , and he was baffled by the sight before him and suspected that there was an ambush . He then withdrew his troops . The following day , Zhuge Liang clapped his hands , laughed , and told an aide that Sima Yi thought that there was an ambush and had retreated . Later , his scouts returned and reported that Sima Yi had indeed retreated . Sima Yi was very upset when he found out later .