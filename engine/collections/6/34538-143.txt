J'onn J'onzz and Mon - El arrive on Earth - 1 with a comatose Kara . The Music Meister attacks and places Barry in a similar coma . He wakes up in a musical world and finds Kara . Meister tells them that if they follow the script , they will return to the real world . Barry and Kara are forced to work as singers in a nightclub run by Malcolm , with Winn working as a piano player , Cisco as a waiter and Stein and Joe as two gangsters opposing Malcolm . Barry and Kara find Malcolm 's son , Mon - El , and Stein 's and Joe 's daughter , Iris , in a forbidden relationship . Kara and Barry convince the pair to reveal their love , also helping Barry and Kara to realize their own mistakes . Malcolm , Stein and Joe subsequently decide to go to war . Barry and Kara are shot in the crossfire , but the real Cisco , Mon - El and Iris vibe into their world to save them , allowing Barry and Kara to admit their loves for Iris and Mon - El . They wake up in S.T.A.R. Labs , and Meister reveals that he just wanted them to realize their love . Kara 's team returns to Earth - 38 , and Barry and Iris move back in together . Barry re-proposes to Iris , who accepts .